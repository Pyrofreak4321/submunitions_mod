<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <DamageDef ParentName="Flame">
    <defName>SM_Napalm</defName>
    <label>burn</label>
    <defaultArmorPenetration>0.1</defaultArmorPenetration>
  </DamageDef>

  <ThingDef ParentName="BaseGas">
    <thingClass>Submunition.Gas_Toxic</thingClass>
    <defName>SM_Gas_Napalm</defName>
    <label>Napalm</label>
    <graphicData>
      <texPath>Things/Gas/Puff</texPath>
      <drawSize>0.1</drawSize>
      <color>(1.0,1.0,1.0, 0.1)</color>
    </graphicData>
    <gas>
      <expireSeconds>
        <min>30</min>
        <max>60</max>
      </expireSeconds>
      <blockTurretTracking>false</blockTurretTracking>
      <accuracyPenalty>0</accuracyPenalty>
      <rotationSpeed>9999</rotationSpeed>
    </gas>
    <modExtensions>
      <li Class="Submunition.DefToxicGasExtension">
        <toxicGasSmokey>20</toxicGasSmokey>
        <toxicGasHot>true</toxicGasHot>
        
        <toxicGasDamageChance>1</toxicGasDamageChance>
        <toxicGasDamageStrength>1</toxicGasDamageStrength>
        <toxicGasDamageDef>SM_Napalm</toxicGasDamageDef>
        <!-- <toxicGasDamageResist>ArmorRating_Heat</toxicGasDamageResist> -->
      </li>
    </modExtensions>
  </ThingDef>
  
  <ThingDef ParentName="MakeableShellBase">
    <defName>Shell_Napalm</defName>
    <label>napalm shell</label>
    <description>An High-tech warhead that leaves a trail of napalm behind as it flys. !! Warning: targeting close range targets may result in unexpected friendly fire !!</description>
    <graphicData>
      <texPath>Submunition/Item/Shell_Napalm</texPath>
      <graphicClass>Graphic_StackCount</graphicClass>
    </graphicData>
    <comps>
      <li Class="CompProperties_Explosive">
        <explosiveRadius>3</explosiveRadius>
        <explosiveDamageType>Flame</explosiveDamageType>
        <explosiveExpandPerStackcount>3</explosiveExpandPerStackcount>
        <startWickHitPointsPercent>0.7</startWickHitPointsPercent>
        <wickTicks>
          <min>30</min>
          <max>60</max>
        </wickTicks>
      </li>
    </comps>
    <projectileWhenLoaded>Bullet_Shell_Napalm</projectileWhenLoaded>
    <costList>
      <Steel>20</Steel>
      <Chemfuel>100</Chemfuel>
    </costList>
    <recipeMaker>
      <workAmount>2400</workAmount>
      <researchPrerequisite>Submunitions</researchPrerequisite>
      <skillRequirements>
        <Crafting>6</Crafting>
      </skillRequirements>
    </recipeMaker>
    <statBases>
      <MaxHitPoints>60</MaxHitPoints>
      <MarketValue>200</MarketValue>
      <Mass>15</Mass>
    </statBases>
    <thingSetMakerTags>
      <li>RewardSpecial</li>
    </thingSetMakerTags>
  </ThingDef>
  <ThingDef ParentName="BaseBullet">
    <defName>Bullet_Shell_Napalm</defName>
    <label>napalm shell</label>
    <graphicData>
      <texPath>Submunition/Item/Bullet_Shell_Napalm</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
    </graphicData>
    <thingClass>Submunition.Projectile_Submunition</thingClass>
    <projectile>
      <damageDef>SM_Napalm</damageDef>
      <speed>41</speed>
      <explosionRadius>1</explosionRadius>
      <flyOverhead>true</flyOverhead>
      <soundHitThickRoof>Artillery_HitThickRoof</soundHitThickRoof>
      <soundExplode>MortarBomb_Explode</soundExplode>
      <soundImpactAnticipate>MortarRound_PreImpact</soundImpactAnticipate>
      <soundAmbient>MortarRound_Ambient</soundAmbient>
      <ai_IsIncendiary>true</ai_IsIncendiary>
    </projectile>
    <modExtensions>
      <li Class="Submunition.DefSubmunitionExtension">
        <submunitionCount>1</submunitionCount>
        <submunitionExplosionRadius>2</submunitionExplosionRadius>
        <submunitionDelay>20</submunitionDelay>
        <submunitionPreDetonation>40</submunitionPreDetonation>
        <submunitionDuration>60</submunitionDuration>
        <submunitionInterval>5</submunitionInterval>
        <submunitionDamageDef>Burn</submunitionDamageDef>
        <submunitionDestroyOnImpact>true</submunitionDestroyOnImpact>
        <submunitionSpawnThingDef>SM_Gas_Napalm</submunitionSpawnThingDef>
        <submunitionSpawnThingChance>1</submunitionSpawnThingChance>
      </li>
    </modExtensions>
  </ThingDef>
  
  <ThingDef ParentName="TrapIEDBase">
    <defName>TrapIED_Napalm</defName>
    <label>Napalm IED trap</label>
    <description>A pair of napalm shells connected to a touch-activated trigger. Since it is hidden in the surrounding terrain, it cannot be placed adjacent to other traps. Animals can sense these when calm.</description>
    <graphicData>
      <texPath>Submunition/Item/IED_Napalm</texPath>
    </graphicData>
    <costList>
      <Shell_Napalm>2</Shell_Napalm>
    </costList>
    <comps>
      <li Class="CompProperties_Explosive">
        <explosiveDamageType>Burn</explosiveDamageType>
        <explosiveRadius>6</explosiveRadius>
        <postExplosionSpawnThingDef>SM_Gas_Napalm</postExplosionSpawnThingDef>
        <postExplosionSpawnChance>1</postExplosionSpawnChance>
        <startWickHitPointsPercent>0.2</startWickHitPointsPercent>
        <wickTicks>
          <min>15</min>
          <max>15</max>
        </wickTicks>
      </li>
    </comps>
    <specialDisplayRadius>6</specialDisplayRadius>
  </ThingDef>    
</Defs>